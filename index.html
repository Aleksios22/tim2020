<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/testSASS.css">
</head>

<body>
    <div>
        <h1 class="text-brown-800">hello my world</h1>
        <button>
            <p>ce bouton est complêtement sauté</p>
        </button>
        <ul id="listeProfs">

        </ul>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/storyblok-js-client@3.1.0/dist/index.standalone.js"></script>
    <script>
        //petite configuration nécéssaire pour acéder a vos données
        let Storyblok = new StoryblokClient({
            accessToken: 'N98tQRqdb63OJePlzQiCqgtt'
        })


        async function obtenirProfs() {

            //le await et le ascyn est important , car aller chercher les données sur internet
            //peut prendre un certain temps, donc on doit les "attendres"
            let lesDonnes = await Storyblok.getAll("cdn/stories", {
                "starts_with": "professeurs/"
            });

            // await console.log(lesDonnes)

            console.log("obtenirProfs -> lesDonnes", lesDonnes)
            return lesDonnes;


        }



        //fonction pour afficher les données dans la page
        async function afficherDonnees() {

            //on doit await la fonction vu quelle va chercher les données
            // sur internet dans le cms par ajax
            let listeProfs = await obtenirProfs();

            let elementUl = document.querySelector("#listeProfs");

            //simple boucle sur la liste des données qu'on a recu
            for (const prof of listeProfs) {

                let elemLi = document.createElement("li");

                elemLi.innerHTML = `<ul class="border-solid border-green-800 border-opacity-100 border">
                        <li>${prof.content.nom}<li/>
                        <li>${prof.content.description}<li/>
                        <img src=${prof.content.photo.filename}> </img>
                    </ul>`;

                elementUl.appendChild(elemLi)

            }

        }

        afficherDonnees()
    </script>
</body>

</html>